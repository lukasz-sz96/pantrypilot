services:
  pantrypilot:
    image: ghcr.io/${GITHUB_REPOSITORY:-pantrypilot}:latest
    ports:
      - "3000:3000"
      - "3210:3210"
      - "6791:6791"
      - "8080:8080"
    volumes:
      - convex-data:/convex/data
    environment:
      - VITE_CLERK_PUBLISHABLE_KEY=${VITE_CLERK_PUBLISHABLE_KEY:-}
      - CLERK_JWT_ISSUER_DOMAIN=${CLERK_JWT_ISSUER_DOMAIN:-}
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY:-}
      - OPENROUTER_MODEL=${OPENROUTER_MODEL:-anthropic/claude-3.5-sonnet}
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - GEMINI_API_KEY=${GEMINI_API_KEY:-}
      - OLLAMA_HOST=${OLLAMA_HOST:-}
    restart: unless-stopped

volumes:
  convex-data:
